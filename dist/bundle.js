!function(t){var e={};function a(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=e,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(s,n,function(e){return t[e]}.bind(null,n));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";a.r(e);a(1);document.addEventListener("DOMContentLoaded",()=>{let t=window.io("http://localhost:3000");localStorage.removeItem("match");let e=document.querySelector(".header__button"),a=document.querySelector(".match__pause"),s=document.querySelectorAll(".match__board td"),n=document.querySelector(".match__turn");e.addEventListener("click",function(){let e=this.dataset.action;if("new match"===e)t.emit(e),this.classList.add("disabled"),M.toast({html:"¡A Jugar!",classes:"blue"});else if("resume match"===e){let t=JSON.parse(localStorage.getItem("match"));t.game.forEach((t,e)=>{t.forEach((t,a)=>{s.forEach((s,n)=>{let r=parseInt(s.dataset.col,10),i=parseInt(s.dataset.row,10);r===a&&i===e&&(s.dataset.value=t,"X"===t?s.innerHTML='<i class="fas fa-times fa-3x grey-text text-darken-3"></i>':"O"===t&&(s.innerHTML='<i class="fas fa-circle fa-3x white-text"></i>'))})})}),n.textContent=`Tu turno ${t.turn}`,this.classList.add("disabled"),a.classList.remove("disabled")}}),s.forEach(s=>{s.addEventListener("click",function(){let s=JSON.parse(localStorage.getItem("match")),r=this.dataset.value;if(s&&!s.isFinished&&!s.isPaused&&"0"===r){this.dataset.value=s.turn,s.game[this.dataset.row][this.dataset.col]=s.turn,this.innerHTML="X"===s.turn?'<i class="fas fa-times fa-3x grey-text text-darken-3"></i>':'<i class="fas fa-circle fa-3x white-text"></i>',s.turn="X"===s.turn?"O":"X",n.textContent=`Tu turno ${s.turn}`,t.emit("save process",s);var i=s.game.flat().filter(t=>!t);if(i.length<=4){let r=function(t){for(let e=0;e<t.length;e++)if(t[e][0]===t[e][1]&&t[e][1]===t[e][2])return t[e][1];for(let e=0;e<t.length;e++)if(t[0][e]===t[1][e]&&t[1][e]===t[2][e])return t[1][e];if(t[0][0]===t[1][1]&&t[1][1]===t[2][2])return t[1][1];if(t[0][2]===t[1][1]&&t[1][1]===t[2][0])return t[1][1]}(s.game);r?(s.winner=r,s.isFinished=!0,s.turn="",e.classList.remove("disabled"),a.classList.add("disabled"),n.textContent="Juego Terminado",M.toast({html:`¡Has ganado ${r}! Felicitaciones`,classes:"blue"}),t.emit("match finished",s),localStorage.removeItem("match")):0===i.length&&(s.draw=!0,s.isFinished=!0,s.turn="",e.classList.remove("disabled"),a.classList.add("disabled"),n.textContent="Juego Terminado",M.toast({html:"¡Empate!",classes:"teal"}),t.emit("match finished",s),localStorage.removeItem("match"))}e.textContent="NUEVO JUEGO",e.dataset.action="new match",localStorage.setItem("match",JSON.stringify(s))}})}),a.addEventListener("click",function(){let t=JSON.parse(localStorage.getItem("match")),e=this.children.item(0),a=this.children.item(1);t.isPaused?(e.classList.remove("fa-play"),e.classList.add("fa-pause"),a.textContent="PAUSA",t.isPaused=!1,M.toast({html:"¡A Jugar!",classes:"blue"})):(e.classList.remove("fa-pause"),e.classList.add("fa-play"),a.textContent="SEGUIR",t.isPaused=!0,M.toast({html:"Juego Pausado",classes:"teal"})),localStorage.setItem("match",JSON.stringify(t))}),t.on("new match created",t=>{t.turn="X",localStorage.setItem("match",JSON.stringify(t)),t.game.forEach((t,e)=>{t.forEach((t,a)=>{s.forEach((s,n)=>{let r=parseInt(s.dataset.col,10),i=parseInt(s.dataset.row,10);r===a&&i===e&&(s.dataset.value=t,s.innerHTML="")})})}),a.classList.remove("disabled"),n.textContent=`Tu turno ${t.turn}`}),t.on("new match finished",t=>{let e=document.querySelector(".dashboard__container"),a=t.draw?"Si":"No",s=document.createElement("div");s.classList.add("dashboard__match"),s.innerHTML=`\n      <small class="dashboard__match__date">${t.createdAt}</small>\n      <p class="dashboard__match__winner">Ganador: <strong>${t.winner}</strong></p>\n      <p class="dashboard__match__draw">Empate? <strong>${a}</strong></p>\n    `,e.prepend(s)}),t.on("there is an unfinished match",t=>{e.textContent="REANUDAR JUEGO",e.dataset.action="resume match",localStorage.setItem("match",JSON.stringify(t))})})},function(t,e,a){}]);